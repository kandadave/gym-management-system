{"ast":null,"code":"import{useState,useEffect,useCallback}from'react';import{Toaster,toast}from'react-hot-toast';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";function AdminDashboard(){const[dashboardData,setDashboardData]=useState(null);const[loading,setLoading]=useState(true);const[newSubscription,setNewSubscription]=useState({plan_name:'',price:'',duration_months:'',description:''});const[newUser,setNewUser]=useState({username:'',email:'',password:'',role:'user'});const[newTrainer,setNewTrainer]=useState({username:'',email:'',password:''});const[editingUser,setEditingUser]=useState(null);const[editingTrainer,setEditingTrainer]=useState(null);const[assignTrainer,setAssignTrainer]=useState({user_id:'',trainer_id:''});const navigate=useNavigate();const fetchDashboard=useCallback(async()=>{try{const response=await fetch('http://localhost:5000/api/admin-dashboard',{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});const data=await response.json();if(response.ok){setDashboardData(data);}else{toast.error(data.error||'Failed to load dashboard');if(response.status===401){localStorage.removeItem('token');localStorage.removeItem('role');navigate('/login');}}}catch(error){toast.error('Network error!');console.error('Fetch error:',error);}finally{setLoading(false);}},[navigate]);useEffect(()=>{fetchDashboard();},[fetchDashboard]);return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 p-6\",children:/*#__PURE__*/_jsx(Toaster,{position:\"top-right\"})});}export default AdminDashboard;","map":{"version":3,"names":["useState","useEffect","useCallback","Toaster","toast","useNavigate","jsx","_jsx","AdminDashboard","dashboardData","setDashboardData","loading","setLoading","newSubscription","setNewSubscription","plan_name","price","duration_months","description","newUser","setNewUser","username","email","password","role","newTrainer","setNewTrainer","editingUser","setEditingUser","editingTrainer","setEditingTrainer","assignTrainer","setAssignTrainer","user_id","trainer_id","navigate","fetchDashboard","response","fetch","headers","Authorization","concat","localStorage","getItem","data","json","ok","error","status","removeItem","console","className","children","position"],"sources":["/home/adreen/Development/code/phase-4/gym-management-system/frontend/src/pages/AdminDashboard.js"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { Toaster, toast } from 'react-hot-toast';\nimport { useNavigate } from 'react-router-dom';\n\nfunction AdminDashboard() {\n  const [dashboardData, setDashboardData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [newSubscription, setNewSubscription] = useState({ plan_name: '', price: '', duration_months: '', description: '' });\n  const [newUser, setNewUser] = useState({ username: '', email: '', password: '', role: 'user' });\n  const [newTrainer, setNewTrainer] = useState({ username: '', email: '', password: '' });\n  const [editingUser, setEditingUser] = useState(null);\n  const [editingTrainer, setEditingTrainer] = useState(null);\n  const [assignTrainer, setAssignTrainer] = useState({ user_id: '', trainer_id: '' });\n  const navigate = useNavigate();\n\n  const fetchDashboard = useCallback(async () => {\n    try {\n      const response = await fetch('http://localhost:5000/api/admin-dashboard', {\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\n      });\n      const data = await response.json();\n      if (response.ok) {\n        setDashboardData(data);\n      } else {\n        toast.error(data.error || 'Failed to load dashboard');\n        if (response.status === 401) {\n          localStorage.removeItem('token');\n          localStorage.removeItem('role');\n          navigate('/login');\n        }\n      }\n    } catch (error) {\n      toast.error('Network error!');\n      console.error('Fetch error:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [navigate]);\n\n \n  useEffect(() => {\n    fetchDashboard();\n  }, [fetchDashboard]);\n\n  \n  return (\n    <div className=\"min-h-screen bg-gray-100 p-6\">\n      {/* ...all existing JSX */}\n      <Toaster position=\"top-right\" />\n    </div>\n  );\n}\n\nexport default AdminDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}