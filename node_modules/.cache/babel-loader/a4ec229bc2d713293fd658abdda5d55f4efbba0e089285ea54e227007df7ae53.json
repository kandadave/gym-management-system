{"ast":null,"code":"import{useState,useEffect}from'react';import{Toaster,toast}from'react-hot-toast';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function UserDashboard(){const[dashboardData,setDashboardData]=useState(null);const[loading,setLoading]=useState(true);const[attendanceMarked,setAttendanceMarked]=useState(false);const navigate=useNavigate();const fetchDashboard=async()=>{try{const response=await fetch('http://localhost:5000/api/dashboard',{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});const data=await response.json();if(response.ok){setDashboardData(data);const today=new Date().toISOString().split('T')[0];const isAttendanceMarked=data.attendance.some(att=>att.date===today&&att.attended);setAttendanceMarked(isAttendanceMarked);}else{toast.error(data.error||'Failed to load dashboard');if(response.status===401){localStorage.removeItem('token');localStorage.removeItem('role');navigate('/login');}}}catch(error){toast.error('Network error!');console.error('Fetch error:',error);}finally{setLoading(false);}};useEffect(()=>{fetchDashboard();},[navigate]);// RSVP for a class\nconst handleRSVP=async classId=>{try{const response=await fetch('http://localhost:5000/api/rsvp',{method:'POST',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(localStorage.getItem('token'))},body:JSON.stringify({class_id:classId})});const data=await response.json();if(response.ok){toast.success(data.message);fetchDashboard();}else{toast.error(data.error||'Failed to RSVP');}}catch(error){toast.error('Network error!');console.error('Fetch error:',error);}};// Mark attendance\nconst handleMarkAttendance=async()=>{try{const response=await fetch('http://localhost:5000/api/attendance',{method:'POST',headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});const data=await response.json();if(response.ok){toast.success(data.message);setAttendanceMarked(true);fetchDashboard();}else{toast.error(data.error||'Failed to mark attendance');}}catch(error){toast.error('Network error!');console.error('Fetch error:',error);}};// Subscribe to a plan\nconst handleRegisterSubscription=async subId=>{try{const response=await fetch('http://localhost:5000/api/user-subscriptions',{method:'POST',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(localStorage.getItem('token'))},body:JSON.stringify({plan_id:subId})});const data=await response.json();if(response.ok){toast.success('Subscribed successfully!');fetchDashboard();}else{toast.error(data.error||'Failed to subscribe');}}catch(error){toast.error('Network error!');console.error('Fetch error:',error);}};// Helper functions\nconst calculateDaysLeft=endDate=>{if(!endDate)return'N/A';const end=new Date(endDate);const now=new Date();const diffTime=end-now;const diffDays=Math.ceil(diffTime/(1000*60*60*24));return diffDays>0?diffDays:'Expired';};const hasActiveSubscription=()=>{return dashboardData===null||dashboardData===void 0?void 0:dashboardData.user_subscriptions.some(sub=>new Date(sub.end_date)>new Date());};const getAvailableSubscriptions=()=>{if(!dashboardData)return[];const subscribedPlanIds=dashboardData.user_subscriptions.map(sub=>sub.plan_id);return dashboardData.subscriptions.filter(sub=>!subscribedPlanIds.includes(sub.id));};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold\",children:\"Loading...\"})});}if(!dashboardData){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-red-500\",children:\"Failed to load dashboard data\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100 p-6\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-3xl font-bold text-gymBlue mb-6\",children:[\"Welcome, \",dashboardData.user.username,\" (User)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-xl mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"My Subscriptions\"}),dashboardData.user_subscriptions.length>0?dashboardData.user_subscriptions.map(sub=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border rounded mb-2 bg-gray-50\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold\",children:sub.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: $\",sub.price]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Start: \",new Date(sub.start_date).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"End: \",sub.end_date?new Date(sub.end_date).toLocaleDateString():'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Days Left: \",calculateDaysLeft(sub.end_date)]})]},sub.id)):/*#__PURE__*/_jsx(\"p\",{children:\"No active subscriptions.\"}),!hasActiveSubscription()&&getAvailableSubscriptions().length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mt-6\",children:\"Available Subscriptions\"}),getAvailableSubscriptions().map(sub=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 border rounded flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[sub.name,\" ($\",sub.price,\")\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRegisterSubscription(sub.id),className:\"bg-gymGreen text-white p-1 rounded hover:bg-green-700\",children:\"Register\"})]},sub.id))]}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mt-6 mb-4\",children:\"My Trainer\"}),dashboardData.trainer_details?/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border rounded mb-6 bg-gray-50\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold\",children:dashboardData.trainer_details.username}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Email: \",dashboardData.trainer_details.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Role: \",dashboardData.trainer_details.role]})]}):/*#__PURE__*/_jsx(\"p\",{children:\"No trainer assigned.\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mt-6 mb-4\",children:\"Available Classes\"}),dashboardData.classes.length>0?dashboardData.classes.map(cls=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 border rounded flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[cls.name,\" (\",new Date(cls.date_time).toLocaleString(),\")\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRSVP(cls.id),disabled:dashboardData.rsvps.some(r=>r.class_id===cls.id),className:\"bg-gymGreen text-white p-1 rounded hover:bg-green-700 transition \".concat(dashboardData.rsvps.some(r=>r.class_id===cls.id)?'opacity-50 cursor-not-allowed':''),children:dashboardData.rsvps.some(r=>r.class_id===cls.id)?'RSVPed':'RSVP'})]},cls.id)):/*#__PURE__*/_jsx(\"p\",{children:\"No classes available.\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mt-6 mb-4\",children:\"Mark Attendance\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleMarkAttendance,disabled:attendanceMarked,className:\"w-full bg-gymGreen text-white p-2 rounded hover:bg-green-700 disabled:opacity-50\",children:attendanceMarked?'Attendance Marked':'Mark Attendance Today'}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mt-6 mb-4\",children:\"Attendance History\"}),dashboardData.attendance.length>0?dashboardData.attendance.map(att=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 border rounded mb-2\",children:[new Date(att.date).toLocaleString(),\" \",att.attended?'(Attended)':'(Not Attended)']},att.id)):/*#__PURE__*/_jsx(\"p\",{children:\"No attendance records.\"})]}),/*#__PURE__*/_jsx(Toaster,{position:\"top-right\"})]});}export default UserDashboard;","map":{"version":3,"names":["useState","useEffect","Toaster","toast","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserDashboard","dashboardData","setDashboardData","loading","setLoading","attendanceMarked","setAttendanceMarked","navigate","fetchDashboard","response","fetch","headers","Authorization","concat","localStorage","getItem","data","json","ok","today","Date","toISOString","split","isAttendanceMarked","attendance","some","att","date","attended","error","status","removeItem","console","handleRSVP","classId","method","body","JSON","stringify","class_id","success","message","handleMarkAttendance","handleRegisterSubscription","subId","plan_id","calculateDaysLeft","endDate","end","now","diffTime","diffDays","Math","ceil","hasActiveSubscription","user_subscriptions","sub","end_date","getAvailableSubscriptions","subscribedPlanIds","map","subscriptions","filter","includes","id","className","children","user","username","length","name","price","start_date","toLocaleDateString","onClick","trainer_details","email","role","classes","cls","date_time","toLocaleString","disabled","rsvps","r","position"],"sources":["/home/adreen/Development/code/phase-4/gym-management-system/frontend/src/pages/UserDashboard.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { Toaster, toast } from 'react-hot-toast';\nimport { useNavigate } from 'react-router-dom';\n\nfunction UserDashboard() {\n  const [dashboardData, setDashboardData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [attendanceMarked, setAttendanceMarked] = useState(false);\n  const navigate = useNavigate();\n\n  const fetchDashboard = async () => {\n    try {\n      const response = await fetch('http://localhost:5000/api/dashboard', {\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\n      });\n      const data = await response.json();\n      if (response.ok) {\n        setDashboardData(data);\n        const today = new Date().toISOString().split('T')[0];\n        const isAttendanceMarked = data.attendance.some(att => att.date === today && att.attended);\n        setAttendanceMarked(isAttendanceMarked);\n      } else {\n        toast.error(data.error || 'Failed to load dashboard');\n        if (response.status === 401) {\n          localStorage.removeItem('token');\n          localStorage.removeItem('role');\n          navigate('/login');\n        }\n      }\n    } catch (error) {\n      toast.error('Network error!');\n      console.error('Fetch error:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchDashboard();\n  }, [navigate]);\n\n  // RSVP for a class\n  const handleRSVP = async (classId) => {\n    try {\n      const response = await fetch('http://localhost:5000/api/rsvp', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${localStorage.getItem('token')}` },\n        body: JSON.stringify({ class_id: classId }),\n      });\n      const data = await response.json();\n      if (response.ok) {\n        toast.success(data.message);\n        fetchDashboard();\n      } else {\n        toast.error(data.error || 'Failed to RSVP');\n      }\n    } catch (error) {\n      toast.error('Network error!');\n      console.error('Fetch error:', error);\n    }\n  };\n\n  // Mark attendance\n  const handleMarkAttendance = async () => {\n    try {\n      const response = await fetch('http://localhost:5000/api/attendance', {\n        method: 'POST',\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\n      });\n      const data = await response.json();\n      if (response.ok) {\n        toast.success(data.message);\n        setAttendanceMarked(true);\n        fetchDashboard();\n      } else {\n        toast.error(data.error || 'Failed to mark attendance');\n      }\n    } catch (error) {\n      toast.error('Network error!');\n      console.error('Fetch error:', error);\n    }\n  };\n\n  // Subscribe to a plan\n  const handleRegisterSubscription = async (subId) => {\n    try {\n      const response = await fetch('http://localhost:5000/api/user-subscriptions', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${localStorage.getItem('token')}` },\n        body: JSON.stringify({ plan_id: subId }),\n      });\n      const data = await response.json();\n      if (response.ok) {\n        toast.success('Subscribed successfully!');\n        fetchDashboard();\n      } else {\n        toast.error(data.error || 'Failed to subscribe');\n      }\n    } catch (error) {\n      toast.error('Network error!');\n      console.error('Fetch error:', error);\n    }\n  };\n\n  // Helper functions\n  const calculateDaysLeft = (endDate) => {\n    if (!endDate) return 'N/A';\n    const end = new Date(endDate);\n    const now = new Date();\n    const diffTime = end - now;\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    return diffDays > 0 ? diffDays : 'Expired';\n  };\n\n  const hasActiveSubscription = () => {\n    return dashboardData?.user_subscriptions.some(sub => new Date(sub.end_date) > new Date());\n  };\n\n  const getAvailableSubscriptions = () => {\n    if (!dashboardData) return [];\n    const subscribedPlanIds = dashboardData.user_subscriptions.map(sub => sub.plan_id);\n    return dashboardData.subscriptions.filter(sub => !subscribedPlanIds.includes(sub.id));\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-100 flex items-center justify-center\">\n        <p className=\"text-lg font-semibold\">Loading...</p>\n      </div>\n    );\n  }\n\n  if (!dashboardData) {\n    return (\n      <div className=\"min-h-screen bg-gray-100 flex items-center justify-center\">\n        <p className=\"text-lg text-red-500\">Failed to load dashboard data</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 p-6\">\n      <h1 className=\"text-3xl font-bold text-gymBlue mb-6\">\n        Welcome, {dashboardData.user.username} (User)\n      </h1>\n\n      {/* My Subscriptions */}\n      <div className=\"bg-white p-6 rounded-lg shadow-xl mb-6\">\n        <h2 className=\"text-xl font-semibold mb-4\">My Subscriptions</h2>\n        {dashboardData.user_subscriptions.length > 0 ? (\n          dashboardData.user_subscriptions.map(sub => (\n            <div key={sub.id} className=\"p-4 border rounded mb-2 bg-gray-50\">\n              <p className=\"font-semibold\">{sub.name}</p>\n              <p>Price: ${sub.price}</p>\n              <p>Start: {new Date(sub.start_date).toLocaleDateString()}</p>\n              <p>End: {sub.end_date ? new Date(sub.end_date).toLocaleDateString() : 'N/A'}</p>\n              <p>Days Left: {calculateDaysLeft(sub.end_date)}</p>\n            </div>\n          ))\n        ) : (\n          <p>No active subscriptions.</p>\n        )}\n\n        {/* Available Subscriptions */}\n        {!hasActiveSubscription() && getAvailableSubscriptions().length > 0 && (\n          <>\n            <h3 className=\"text-lg font-semibold mt-6\">Available Subscriptions</h3>\n            {getAvailableSubscriptions().map(sub => (\n              <div key={sub.id} className=\"p-2 border rounded flex justify-between items-center mb-2\">\n                <span>{sub.name} (${sub.price})</span>\n                <button\n                  onClick={() => handleRegisterSubscription(sub.id)}\n                  className=\"bg-gymGreen text-white p-1 rounded hover:bg-green-700\"\n                >\n                  Register\n                </button>\n              </div>\n            ))}\n          </>\n        )}\n\n        {/* My Trainer */}\n        <h2 className=\"text-xl font-semibold mt-6 mb-4\">My Trainer</h2>\n        {dashboardData.trainer_details ? (\n          <div className=\"p-4 border rounded mb-6 bg-gray-50\">\n            <p className=\"font-semibold\">{dashboardData.trainer_details.username}</p>\n            <p>Email: {dashboardData.trainer_details.email}</p>\n            <p>Role: {dashboardData.trainer_details.role}</p>\n          </div>\n        ) : (\n          <p>No trainer assigned.</p>\n        )}\n\n        {/* Available Classes */}\n        <h2 className=\"text-xl font-semibold mt-6 mb-4\">Available Classes</h2>\n        {dashboardData.classes.length > 0 ? (\n          dashboardData.classes.map(cls => (\n            <div key={cls.id} className=\"p-2 border rounded flex justify-between items-center mb-2\">\n              <span>{cls.name} ({new Date(cls.date_time).toLocaleString()})</span>\n              <button\n                onClick={() => handleRSVP(cls.id)}\n                disabled={dashboardData.rsvps.some(r => r.class_id === cls.id)}\n                className={`bg-gymGreen text-white p-1 rounded hover:bg-green-700 transition ${dashboardData.rsvps.some(r => r.class_id === cls.id) ? 'opacity-50 cursor-not-allowed' : ''}`}\n              >\n                {dashboardData.rsvps.some(r => r.class_id === cls.id) ? 'RSVPed' : 'RSVP'}\n              </button>\n            </div>\n          ))\n        ) : <p>No classes available.</p>}\n\n        {/* Attendance */}\n        <h2 className=\"text-xl font-semibold mt-6 mb-4\">Mark Attendance</h2>\n        <button\n          onClick={handleMarkAttendance}\n          disabled={attendanceMarked}\n          className=\"w-full bg-gymGreen text-white p-2 rounded hover:bg-green-700 disabled:opacity-50\"\n        >\n          {attendanceMarked ? 'Attendance Marked' : 'Mark Attendance Today'}\n        </button>\n\n        {/* Attendance History */}\n        <h2 className=\"text-xl font-semibold mt-6 mb-4\">Attendance History</h2>\n        {dashboardData.attendance.length > 0 ? (\n          dashboardData.attendance.map(att => (\n            <div key={att.id} className=\"p-2 border rounded mb-2\">\n              {new Date(att.date).toLocaleString()} {att.attended ? '(Attended)' : '(Not Attended)'}\n            </div>\n          ))\n        ) : <p>No attendance records.</p>}\n      </div>\n\n      <Toaster position=\"top-right\" />\n    </div>\n  );\n}\n\nexport default UserDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}