{"ast":null,"code":"import{useNavigate}from'react-router-dom';import{Formik,Form,Field,ErrorMessage}from'formik';import*as Yup from'yup';import{Toaster,toast}from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const navigate=useNavigate();return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-lg shadow-xl w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gymBlue mb-6\",children:\"Login\"}),/*#__PURE__*/_jsx(Formik,{initialValues:{username:'',password:''},validationSchema:Yup.object({username:Yup.string().required('Required'),password:Yup.string().min(6,'Password must be at least 6 characters').required('Required')}),onSubmit:(values,_ref)=>{let{setSubmitting}=_ref;console.log('Submitting login with values:',values);fetch('http://localhost:5000/api/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(values)}).then(res=>{console.log('Response status:',res.status);return res.json();}).then(data=>{console.log('Response data:',data);if(data.access_token){localStorage.setItem('token',data.access_token);localStorage.setItem('role',data.role);toast.success('Login successful!');navigate(data.role==='admin'?'/admin-dashboard':data.role==='trainer'?'/trainer-dashboard':'/dashboard');}else{toast.error(data.error||'Login failed!');}setSubmitting(false);}).catch(error=>{console.error('Fetch error:',error);toast.error('Network error!');setSubmitting(false);});},children:_ref2=>{let{isSubmitting}=_ref2;return/*#__PURE__*/_jsxs(Form,{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Field,{name:\"username\",type:\"text\",autoComplete:\"username\",className:\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-gymBlue\",placeholder:\"Username\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"username\",component:\"div\",className:\"text-red-500 text-sm mt-1\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Field,{name:\"password\",type:\"password\",autoComplete:\"current-password\",className:\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-gymBlue\",placeholder:\"Password\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"password\",component:\"div\",className:\"text-red-500 text-sm mt-1\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isSubmitting,className:\"w-full bg-gymGreen text-white p-2 rounded hover:bg-green-700 transition disabled:opacity-50\",children:isSubmitting?'Logging in...':'Login'})]});}}),/*#__PURE__*/_jsx(Toaster,{position:\"top-right\"})]})});}export default Login;","map":{"version":3,"names":["useNavigate","Formik","Form","Field","ErrorMessage","Yup","Toaster","toast","jsx","_jsx","jsxs","_jsxs","Login","navigate","className","children","initialValues","username","password","validationSchema","object","string","required","min","onSubmit","values","_ref","setSubmitting","console","log","fetch","method","headers","body","JSON","stringify","then","res","status","json","data","access_token","localStorage","setItem","role","success","error","catch","_ref2","isSubmitting","name","type","autoComplete","placeholder","component","disabled","position"],"sources":["/home/adreen/Development/code/phase-4/gym-management-system/frontend/src/components/Login.js"],"sourcesContent":["import { useNavigate } from 'react-router-dom';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport * as Yup from 'yup';\nimport { Toaster, toast } from 'react-hot-toast';\n\nfunction Login() {\n  const navigate = useNavigate();\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 flex items-center justify-center\">\n      <div className=\"bg-white p-8 rounded-lg shadow-xl w-full max-w-md\">\n        <h2 className=\"text-2xl font-bold text-gymBlue mb-6\">Login</h2>\n        <Formik\n          initialValues={{ username: '', password: '' }}\n          validationSchema={Yup.object({\n            username: Yup.string().required('Required'),\n            password: Yup.string().min(6, 'Password must be at least 6 characters').required('Required'),\n          })}\n          onSubmit={(values, { setSubmitting }) => {\n            console.log('Submitting login with values:', values);\n            fetch('http://localhost:5000/api/login', {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify(values),\n            })\n              .then((res) => {\n                console.log('Response status:', res.status);\n                return res.json();\n              })\n              .then((data) => {\n                console.log('Response data:', data);\n                if (data.access_token) {\n                  localStorage.setItem('token', data.access_token);\n                  localStorage.setItem('role', data.role);\n                  toast.success('Login successful!');\n                  navigate(data.role === 'admin' ? '/admin-dashboard' : data.role === 'trainer' ? '/trainer-dashboard' : '/dashboard');\n                } else {\n                  toast.error(data.error || 'Login failed!');\n                }\n                setSubmitting(false);\n              })\n              .catch((error) => {\n                console.error('Fetch error:', error);\n                toast.error('Network error!');\n                setSubmitting(false);\n              });\n          }}\n        >\n          {({ isSubmitting }) => (\n            <Form className=\"space-y-4\">\n              <div>\n                <Field\n                  name=\"username\"\n                  type=\"text\"\n                  autoComplete=\"username\"\n                  className=\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-gymBlue\"\n                  placeholder=\"Username\"\n                />\n                <ErrorMessage name=\"username\" component=\"div\" className=\"text-red-500 text-sm mt-1\" />\n              </div>\n              <div>\n                <Field\n                  name=\"password\"\n                  type=\"password\"\n                  autoComplete=\"current-password\"\n                  className=\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-gymBlue\"\n                  placeholder=\"Password\"\n                />\n                <ErrorMessage name=\"password\" component=\"div\" className=\"text-red-500 text-sm mt-1\" />\n              </div>\n              <button\n                type=\"submit\"\n                disabled={isSubmitting}\n                className=\"w-full bg-gymGreen text-white p-2 rounded hover:bg-green-700 transition disabled:opacity-50\"\n              >\n                {isSubmitting ? 'Logging in...' : 'Login'}\n              </button>\n            </Form>\n          )}\n        </Formik>\n        <Toaster position=\"top-right\" />\n      </div>\n    </div>\n  );\n}\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}