{"ast":null,"code":"import{useNavigate}from'react-router-dom';import{Formik,Form,Field,ErrorMessage}from'formik';import*as Yup from'yup';import{Toaster,toast}from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Register(){const navigate=useNavigate();return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-lg shadow-xl w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gymBlue mb-6\",children:\"Register\"}),/*#__PURE__*/_jsx(Formik,{initialValues:{username:'',email:'',password:'',role:'user'},validationSchema:Yup.object({username:Yup.string().required('Required'),email:Yup.string().email('Invalid email address').required('Required'),password:Yup.string().min(6,'Password must be at least 6 characters').required('Required'),role:Yup.string().oneOf(['user','trainer','admin'],'Invalid role').required('Required')}),onSubmit:(values,_ref)=>{let{setSubmitting}=_ref;console.log('Submitting register with values:',values);fetch('http://localhost:5000/api/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(values)}).then(res=>{console.log('Response status:',res.status);return res.json();}).then(data=>{console.log('Response data:',data);if(data.access_token){localStorage.setItem('token',data.access_token);localStorage.setItem('role',data.role);toast.success('Registration successful!');navigate(data.role==='admin'?'/admin-dashboard':data.role==='trainer'?'/trainer-dashboard':'/dashboard');}else{toast.error(data.error||'Registration failed!');}setSubmitting(false);}).catch(error=>{console.error('Fetch error:',error);toast.error('Network error!');setSubmitting(false);});},children:_ref2=>{let{isSubmitting}=_ref2;return/*#__PURE__*/_jsxs(Form,{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Field,{name:\"username\",type:\"text\",autoComplete:\"username\",className:\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-gymBlue\",placeholder:\"Username\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"username\",component:\"div\",className:\"text-red-500 text-sm mt-1\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Field,{name:\"email\",type:\"email\",autoComplete:\"email\",className:\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-gymBlue\",placeholder:\"Email\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"email\",component:\"div\",className:\"text-red-500 text-sm mt-1\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Field,{name:\"password\",type:\"password\",autoComplete:\"new-password\",className:\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-gymBlue\",placeholder:\"Password\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"password\",component:\"div\",className:\"text-red-500 text-sm mt-1\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Field,{as:\"select\",name:\"role\",className:\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-gymBlue\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"User\"}),/*#__PURE__*/_jsx(\"option\",{value:\"trainer\",children:\"Trainer\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"})]}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"role\",component:\"div\",className:\"text-red-500 text-sm mt-1\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isSubmitting,className:\"w-full bg-gymGreen text-white p-2 rounded hover:bg-green-700 transition disabled:opacity-50\",children:isSubmitting?'Registering...':'Register'})]});}}),/*#__PURE__*/_jsx(Toaster,{position:\"top-right\"})]})});}export default Register;","map":{"version":3,"names":["useNavigate","Formik","Form","Field","ErrorMessage","Yup","Toaster","toast","jsx","_jsx","jsxs","_jsxs","Register","navigate","className","children","initialValues","username","email","password","role","validationSchema","object","string","required","min","oneOf","onSubmit","values","_ref","setSubmitting","console","log","fetch","method","headers","body","JSON","stringify","then","res","status","json","data","access_token","localStorage","setItem","success","error","catch","_ref2","isSubmitting","name","type","autoComplete","placeholder","component","as","value","disabled","position"],"sources":["/home/adreen/Development/code/phase-4/gym-management-system/frontend/src/components/Register.js"],"sourcesContent":["import { useNavigate } from 'react-router-dom';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport * as Yup from 'yup';\nimport { Toaster, toast } from 'react-hot-toast';\n\nfunction Register() {\n  const navigate = useNavigate();\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 flex items-center justify-center\">\n      <div className=\"bg-white p-8 rounded-lg shadow-xl w-full max-w-md\">\n        <h2 className=\"text-2xl font-bold text-gymBlue mb-6\">Register</h2>\n        <Formik\n          initialValues={{ username: '', email: '', password: '', role: 'user' }}\n          validationSchema={Yup.object({\n            username: Yup.string().required('Required'),\n            email: Yup.string().email('Invalid email address').required('Required'),\n            password: Yup.string().min(6, 'Password must be at least 6 characters').required('Required'),\n            role: Yup.string().oneOf(['user', 'trainer', 'admin'], 'Invalid role').required('Required'),\n          })}\n          onSubmit={(values, { setSubmitting }) => {\n            console.log('Submitting register with values:', values);\n            fetch('http://localhost:5000/api/register', {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify(values),\n            })\n              .then((res) => {\n                console.log('Response status:', res.status);\n                return res.json();\n              })\n              .then((data) => {\n                console.log('Response data:', data);\n                if (data.access_token) {\n                  localStorage.setItem('token', data.access_token);\n                  localStorage.setItem('role', data.role);\n                  toast.success('Registration successful!');\n                  navigate(data.role === 'admin' ? '/admin-dashboard' : data.role === 'trainer' ? '/trainer-dashboard' : '/dashboard');\n                } else {\n                  toast.error(data.error || 'Registration failed!');\n                }\n                setSubmitting(false);\n              })\n              .catch((error) => {\n                console.error('Fetch error:', error);\n                toast.error('Network error!');\n                setSubmitting(false);\n              });\n          }}\n        >\n          {({ isSubmitting }) => (\n            <Form className=\"space-y-4\">\n              <div>\n                <Field\n                  name=\"username\"\n                  type=\"text\"\n                  autoComplete=\"username\"\n                  className=\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-gymBlue\"\n                  placeholder=\"Username\"\n                />\n                <ErrorMessage name=\"username\" component=\"div\" className=\"text-red-500 text-sm mt-1\" />\n              </div>\n              <div>\n                <Field\n                  name=\"email\"\n                  type=\"email\"\n                  autoComplete=\"email\"\n                  className=\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-gymBlue\"\n                  placeholder=\"Email\"\n                />\n                <ErrorMessage name=\"email\" component=\"div\" className=\"text-red-500 text-sm mt-1\" />\n              </div>\n              <div>\n                <Field\n                  name=\"password\"\n                  type=\"password\"\n                  autoComplete=\"new-password\"\n                  className=\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-gymBlue\"\n                  placeholder=\"Password\"\n                />\n                <ErrorMessage name=\"password\" component=\"div\" className=\"text-red-500 text-sm mt-1\" />\n              </div>\n              <div>\n                <Field\n                  as=\"select\"\n                  name=\"role\"\n                  className=\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-gymBlue\"\n                >\n                  <option value=\"user\">User</option>\n                  <option value=\"trainer\">Trainer</option>\n                  <option value=\"admin\">Admin</option>\n                </Field>\n                <ErrorMessage name=\"role\" component=\"div\" className=\"text-red-500 text-sm mt-1\" />\n              </div>\n              <button\n                type=\"submit\"\n                disabled={isSubmitting}\n                className=\"w-full bg-gymGreen text-white p-2 rounded hover:bg-green-700 transition disabled:opacity-50\"\n              >\n                {isSubmitting ? 'Registering...' : 'Register'}\n              </button>\n            </Form>\n          )}\n        </Formik>\n        <Toaster position=\"top-right\" />\n      </div>\n    </div>\n  );\n}\n\nexport default Register;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}