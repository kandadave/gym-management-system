{"ast":null,"code":"import{useState,useEffect}from'react';import{Formik,Form,Field,ErrorMessage}from'formik';import*as Yup from'yup';import{Toaster,toast}from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function HealthProfile(){const[profile,setProfile]=useState(null);useEffect(()=>{fetch('http://localhost:5000/api/health-profile',{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}}).then(res=>res.json()).then(data=>{if(data.error){toast.error(data.error);}else{setProfile(data);}}).catch(()=>toast.error('Failed to fetch profile!'));},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100 p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gymBlue mb-6\",children:\"Health Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-xl max-w-md mx-auto\",children:[/*#__PURE__*/_jsx(Formik,{initialValues:{height_cm:(profile===null||profile===void 0?void 0:profile.height_cm)||'',weight_kg:(profile===null||profile===void 0?void 0:profile.weight_kg)||'',goal:(profile===null||profile===void 0?void 0:profile.goal)||''},enableReinitialize:true,validationSchema:Yup.object({height_cm:Yup.number().min(100,'Height must be at least 100 cm').required('Required'),weight_kg:Yup.number().min(30,'Weight must be at least 30 kg').required('Required'),goal:Yup.string().required('Required')}),onSubmit:(values,_ref)=>{let{setSubmitting}=_ref;fetch('http://localhost:5000/api/health-profile',{method:'PATCH',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(localStorage.getItem('token'))},body:JSON.stringify(values)}).then(res=>res.json()).then(data=>{if(data.error){toast.error(data.error);}else{toast.success(\"Profile updated! BMI: \".concat(data.bmi.toFixed(2)));setProfile(data);}setSubmitting(false);}).catch(()=>{toast.error('Failed to update profile!');setSubmitting(false);});},children:_ref2=>{let{isSubmitting,values}=_ref2;return/*#__PURE__*/_jsxs(Form,{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Field,{name:\"height_cm\",type:\"number\",className:\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-gymBlue\",placeholder:\"Height (cm)\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"height_cm\",component:\"div\",className:\"text-red-500 text-sm mt-1\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Field,{name:\"weight_kg\",type:\"number\",className:\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-gymBlue\",placeholder:\"Weight (kg)\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"weight_kg\",component:\"div\",className:\"text-red-500 text-sm mt-1\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Field,{name:\"goal\",type:\"text\",className:\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-gymBlue\",placeholder:\"Fitness Goal\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"goal\",component:\"div\",className:\"text-red-500 text-sm mt-1\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"BMI: \",values.height_cm&&values.weight_kg?(values.weight_kg/(values.height_cm/100)**2).toFixed(2):'N/A']})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isSubmitting,className:\"w-full bg-gymGreen text-white p-2 rounded hover:bg-green-700 transition disabled:opacity-50\",children:isSubmitting?'Updating...':'Update Profile'})]});}}),profile&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"Current BMI: \",profile.bmi?profile.bmi.toFixed(2):'N/A']}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"Goal: \",profile.goal||'None']})]}),/*#__PURE__*/_jsx(Toaster,{position:\"top-right\"})]})]});}export default HealthProfile;","map":{"version":3,"names":["useState","useEffect","Formik","Form","Field","ErrorMessage","Yup","Toaster","toast","jsx","_jsx","jsxs","_jsxs","HealthProfile","profile","setProfile","fetch","headers","Authorization","concat","localStorage","getItem","then","res","json","data","error","catch","className","children","initialValues","height_cm","weight_kg","goal","enableReinitialize","validationSchema","object","number","min","required","string","onSubmit","values","_ref","setSubmitting","method","body","JSON","stringify","success","bmi","toFixed","_ref2","isSubmitting","name","type","placeholder","component","disabled","position"],"sources":["/home/adreen/Development/code/phase-4/gym-management-system/frontend/src/pages/HealthProfile.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport * as Yup from 'yup';\nimport { Toaster, toast } from 'react-hot-toast';\n\nfunction HealthProfile() {\n  const [profile, setProfile] = useState(null);\n\n  useEffect(() => {\n    fetch('http://localhost:5000/api/health-profile', {\n      headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.error) {\n          toast.error(data.error);\n        } else {\n          setProfile(data);\n        }\n      })\n      .catch(() => toast.error('Failed to fetch profile!'));\n  }, []);\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 p-6\">\n      <h1 className=\"text-3xl font-bold text-gymBlue mb-6\">Health Profile</h1>\n      <div className=\"bg-white p-6 rounded-lg shadow-xl max-w-md mx-auto\">\n        <Formik\n          initialValues={{\n            height_cm: profile?.height_cm || '',\n            weight_kg: profile?.weight_kg || '',\n            goal: profile?.goal || '',\n          }}\n          enableReinitialize\n          validationSchema={Yup.object({\n            height_cm: Yup.number().min(100, 'Height must be at least 100 cm').required('Required'),\n            weight_kg: Yup.number().min(30, 'Weight must be at least 30 kg').required('Required'),\n            goal: Yup.string().required('Required'),\n          })}\n          onSubmit={(values, { setSubmitting }) => {\n            fetch('http://localhost:5000/api/health-profile', {\n              method: 'PATCH',\n              headers: {\n                'Content-Type': 'application/json',\n                Authorization: `Bearer ${localStorage.getItem('token')}`,\n              },\n              body: JSON.stringify(values),\n            })\n              .then((res) => res.json())\n              .then((data) => {\n                if (data.error) {\n                  toast.error(data.error);\n                } else {\n                  toast.success(`Profile updated! BMI: ${data.bmi.toFixed(2)}`);\n                  setProfile(data);\n                }\n                setSubmitting(false);\n              })\n              .catch(() => {\n                toast.error('Failed to update profile!');\n                setSubmitting(false);\n              });\n          }}\n        >\n          {({ isSubmitting, values }) => (\n            <Form className=\"space-y-4\">\n              <div>\n                <Field\n                  name=\"height_cm\"\n                  type=\"number\"\n                  className=\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-gymBlue\"\n                  placeholder=\"Height (cm)\"\n                />\n                <ErrorMessage name=\"height_cm\" component=\"div\" className=\"text-red-500 text-sm mt-1\" />\n              </div>\n              <div>\n                <Field\n                  name=\"weight_kg\"\n                  type=\"number\"\n                  className=\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-gymBlue\"\n                  placeholder=\"Weight (kg)\"\n                />\n                <ErrorMessage name=\"weight_kg\" component=\"div\" className=\"text-red-500 text-sm mt-1\" />\n              </div>\n              <div>\n                <Field\n                  name=\"goal\"\n                  type=\"text\"\n                  className=\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-gymBlue\"\n                  placeholder=\"Fitness Goal\"\n                />\n                <ErrorMessage name=\"goal\" component=\"div\" className=\"text-red-500 text-sm mt-1\" />\n              </div>\n              <div>\n                <p className=\"text-gray-600\">\n                  BMI: {values.height_cm && values.weight_kg\n                    ? (values.weight_kg / ((values.height_cm / 100) ** 2)).toFixed(2)\n                    : 'N/A'}\n                </p>\n              </div>\n              <button\n                type=\"submit\"\n                disabled={isSubmitting}\n                className=\"w-full bg-gymGreen text-white p-2 rounded hover:bg-green-700 transition disabled:opacity-50\"\n              >\n                {isSubmitting ? 'Updating...' : 'Update Profile'}\n              </button>\n            </Form>\n          )}\n        </Formik>\n        {profile && (\n          <div className=\"mt-4\">\n            <p className=\"text-gray-600\">Current BMI: {profile.bmi ? profile.bmi.toFixed(2) : 'N/A'}</p>\n            <p className=\"text-gray-600\">Goal: {profile.goal || 'None'}</p>\n          </div>\n        )}\n        <Toaster position=\"top-right\" />\n      </div>\n    </div>\n  );\n}\n\nexport default HealthProfile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}